<!DOCTYPE html>
<html>
<head>
  <title>R mini camp: Reshape2 and Tidyr</title>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="20180212_Reshape2_and_Tidyr_files/shower-ribbon/package/styles/screen-16x10.css">
  <link rel="stylesheet" href="20180212_Reshape2_and_Tidyr_files/rmdshower/style-common.css">
  <link rel="stylesheet" href="20180212_Reshape2_and_Tidyr_files/rmdshower/style-ribbon.css">
  <link rel="stylesheet" href="20180212_Reshape2_and_Tidyr_files/shower-ribbon/style-override.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.5.1/katex.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.5.1/katex.min.js"></script>
  <script src="20180212_Reshape2_and_Tidyr_files/rmdshower/auto-render.min.js" type="text/javascript"></script>
  
  
    <style type="text/css">
   div.sourceCode { overflow-x: auto; }
   table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
     margin: 0; padding: 0; vertical-align: baseline; border: none; }
   table.sourceCode { width: 100%; line-height: 100%; }
   td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
   td.sourceCode { padding-left: 5px; }
   code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
   code > span.dt { color: #902000; } /* DataType */
   code > span.dv { color: #40a070; } /* DecVal */
   code > span.bn { color: #40a070; } /* BaseN */
   code > span.fl { color: #40a070; } /* Float */
   code > span.ch { color: #4070a0; } /* Char */
   code > span.st { color: #4070a0; } /* String */
   code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
   code > span.ot { color: #007020; } /* Other */
   code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
   code > span.fu { color: #06287e; } /* Function */
   code > span.er { color: #ff0000; font-weight: bold; } /* Error */
   code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
   code > span.cn { color: #880000; } /* Constant */
   code > span.sc { color: #4070a0; } /* SpecialChar */
   code > span.vs { color: #4070a0; } /* VerbatimString */
   code > span.ss { color: #bb6688; } /* SpecialString */
   code > span.im { } /* Import */
   code > span.va { color: #19177c; } /* Variable */
   code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
   code > span.op { color: #666666; } /* Operator */
   code > span.bu { } /* BuiltIn */
   code > span.ex { } /* Extension */
   code > span.pp { color: #bc7a00; } /* Preprocessor */
   code > span.at { color: #7d9029; } /* Attribute */
   code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
   code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
   code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
   code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
  </style>
  
  
  
</head>

<body class="shower list">

  <header class="caption">
    <h1>R mini camp: Reshape2 and Tidyr</h1>
    <p>Xianjun Dong, PhD | Bioinformatics Club | <a href="http://bioinformatics.bwh.harvard.edu" class="uri">http://bioinformatics.bwh.harvard.edu</a></p>
  </header>

  
  
<section id="section" class="slide level2 black fullpage">
<h2></h2>
<img src="https://ichef.bbci.co.uk/images/ic/1920x1080/p036910b.jpg" class="cover"> <br><br><br><br> <font size=5 color='white'>Bioinformatics Club | R mini camp</font><br> <font size=12 color='white'><b>Reshape2 and Tidyr</b></font>
<p class="white">
Xianjun Dong, PhD<br> <a href="http://bioinformatics.bwh.harvard.edu" class="uri">http://bioinformatics.bwh.harvard.edu</a>
</p>
</section>
<section id="in-short" class="slide level2">
<h2>In short</h2>
<ul>
<li><strong>Reshape2</strong> is an R package written by Hadley Wickham that makes it easy to transform data between <strong><em>wide</em></strong> and <strong><em>long</em></strong> formats.</li>
<li><strong>tidyr</strong> replaces <strong>reshape2</strong> (2010-2014) and <strong>reshape</strong> (2005-2010).</li>
<li><strong>tidyr</strong> is designed specifically for tidying data, not general reshaping (reshape2), or the general aggregation (reshape).</li>
</ul>
</section>
<section id="in-short-1" class="slide level2">
<h2>In short</h2>
<table>
<thead>
<tr class="header">
<th>method</th>
<th>wide-&gt;long</th>
<th>long-&gt;wide</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>reshape2</td>
<td>melt</td>
<td>cast</td>
</tr>
<tr class="even">
<td>tidyr</td>
<td>gather</td>
<td>spread</td>
</tr>
<tr class="odd">
<td>spreadsheet</td>
<td>unpiovt</td>
<td>pivot</td>
</tr>
<tr class="even">
<td>database</td>
<td>fold</td>
<td>unfold</td>
</tr>
</tbody>
</table>
</section>
<section id="wide-and-long-format" class="slide level2">
<h2>Wide and long format</h2>
<div class="double">
<p class="double-flow">
<ul>
<li>long format</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#    variable  value</span>
<span class="co"># 1     ozone 23.615</span>
<span class="co"># 2     ozone 29.444</span>
<span class="co"># 3     ozone 59.115</span>
<span class="co"># 4     ozone 59.962</span>
<span class="co"># 5      wind 11.623</span>
<span class="co"># 6      wind 10.267</span>
<span class="co"># 7      wind  8.942</span>
<span class="co"># 8      wind  8.794</span>
<span class="co"># 9      temp 65.548</span>
<span class="co"># ...</span></code></pre></div>
</p>
<p class="double-flow">
<ul>
<li>wide format</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#   ozone   wind  temp</span>
<span class="co"># 1 23.62 11.623 65.55</span>
<span class="co"># 2 29.44 10.267 79.10</span>
<span class="co"># 3 59.12  8.942 83.90</span>
<span class="co"># 4 59.96  8.794 83.97</span></code></pre></div>
</p>
</div>
</section>
<section id="wide-and-long-format-1" class="slide level2">
<h2>Wide and long format</h2>
<ul>
<li>Long-format data has a column for possible variable types and a column for the values of those variables.</li>
<li>Long-format data isn’t necessarily only two columns.</li>
<li>Long-format is widely used in many tools, such as <code>ggplot2</code>, <code>plyr</code>, <code>lm()</code>, <code>glm()</code> etc.</li>
<li>Wide-format is easier and intuitive for recording data.</li>
</ul>
</section>
<section id="reshape2" class="slide level2 white">
<h2>reshape2</h2>
<p><img src="https://ichef.bbci.co.uk/images/ic/1920x1080/p036910b.jpg" class="cover"></p>
<p><font color="white"> reshape2 is based around two key functions: <code>melt</code> and <code>cast</code>:</p>
<ul>
<li><code>melt</code>: convert wide- to long-format</li>
<li><code>cast</code>: convert long- to wide-format</li>
</ul>
<p>Think of working with metal: if you melt metal, it drips and becomes long. If you cast it into a mould, it becomes wide. </font></p>
</section>
<section id="melt-wide--to-long-format" class="slide level2">
<h2>melt: wide- to long-format</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Daily air quality measurements in New York, May to September 1973.</span>
<span class="co"># - Ozone: Mean trioxygen in parts per billion </span>
<span class="co"># - Solar.R: Solar radiation in Langleys </span>
<span class="co"># - Wind: Average wind speed in miles per hour </span>
<span class="co"># - Temp: Maximum daily temperature in degrees Fahrenheit </span>
<span class="kw">names</span>(airquality) &lt;-<span class="st"> </span><span class="kw">tolower</span>(<span class="kw">names</span>(airquality))
<span class="kw">head</span>(airquality)</code></pre></div>
<pre><code>##   ozone solar.r wind temp month day
## 1    41     190  7.4   67     5   1
## 2    36     118  8.0   72     5   2
## 3    12     149 12.6   74     5   3
## 4    18     313 11.5   62     5   4
## 5    NA      NA 14.3   56     5   5
## 6    28      NA 14.9   66     5   6</code></pre>
</section>
<section id="melt-wide--to-long-format-1" class="slide level2">
<h2>melt: wide- to long-format</h2>
<p>By default, <code>melt</code> has assumed that all columns with numeric values are variables with values.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(reshape2)
aql &lt;-<span class="st"> </span><span class="kw">melt</span>(airquality) <span class="co"># [a]ir [q]uality [l]ong format</span></code></pre></div>
<pre><code>## No id variables; using all as measure variables</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(aql)</code></pre></div>
<pre><code>##   variable value
## 1    ozone    41
## 2    ozone    36
## 3    ozone    12
## 4    ozone    18
## 5    ozone    NA
## 6    ozone    28</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">tail</span>(aql)</code></pre></div>
<pre><code>##     variable value
## 913      day    25
## 914      day    26
## 915      day    27
## 916      day    28
## 917      day    29
## 918      day    30</code></pre>
</section>
<section id="melt-wide--to-long-format-2" class="slide level2">
<h2>melt: wide- to long-format</h2>
<p>What about if we want to know the values of <code>ozone</code>, <code>solar.r</code>, <code>wind</code>, and <code>temp</code> for each month and day?</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">aql &lt;-<span class="st"> </span><span class="kw">melt</span>(airquality, <span class="dt">id.vars =</span> <span class="kw">c</span>(<span class="st">&quot;month&quot;</span>, <span class="st">&quot;day&quot;</span>))
<span class="kw">head</span>(aql)</code></pre></div>
<pre><code>##   month day variable value
## 1     5   1    ozone    41
## 2     5   2    ozone    36
## 3     5   3    ozone    12
## 4     5   4    ozone    18
## 5     5   5    ozone    NA
## 6     5   6    ozone    28</code></pre>
</section>
<section id="melt-full-arguments" class="slide level2">
<h2>melt() full arguments</h2>
<p><code>?melt</code></p>
<p><strong>Usage</strong></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># S3 method for class &#39;data.frame&#39;</span>
<span class="kw">melt</span>(data, id.vars, measure.vars,
  <span class="dt">variable.name =</span> <span class="st">&quot;variable&quot;</span>, ..., <span class="dt">na.rm =</span> <span class="ot">FALSE</span>, <span class="dt">value.name =</span> <span class="st">&quot;value&quot;</span>,
  <span class="dt">factorsAsStrings =</span> <span class="ot">TRUE</span>)</code></pre></div>
<p><strong>Arguments</strong></p>
<table style="width:53%;">
<colgroup>
<col style="width: 26%" />
<col style="width: 26%" />
</colgroup>
<thead>
<tr class="header">
<th>argument</th>
<th>meaning</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>data</td>
<td>data frame to melt</td>
</tr>
<tr class="even">
<td>id.vars</td>
<td>vector of id variables. Can be integer (variable position) or string (variable name). If blank, will use all non-measured variables.</td>
</tr>
<tr class="odd">
<td>measure.vars</td>
<td>vector of measured variables. Can be integer (variable position) or string (variable name)If blank, will use all non id.vars</td>
</tr>
<tr class="even">
<td>variable.name</td>
<td>name of variable used to store measured variable names</td>
</tr>
<tr class="odd">
<td>…</td>
<td>further arguments passed to or from other methods.</td>
</tr>
<tr class="even">
<td>na.rm</td>
<td>Should NA values be removed from the data set? This will convert explicit missings to implicit missings.</td>
</tr>
<tr class="odd">
<td>value.name</td>
<td>name of variable used to store values</td>
</tr>
<tr class="even">
<td>factorsAsStrings</td>
<td>Control whether factors are converted to character when melted as measure variables. When FALSE, coercion is forced if levels are not identical across the measure.vars.</td>
</tr>
</tbody>
</table>
</section>
<section id="melt-wide--to-long-format-3" class="slide level2">
<h2>melt: wide- to long-format</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">aql &lt;-<span class="st"> </span><span class="kw">melt</span>(airquality, <span class="dt">id.vars =</span> <span class="kw">c</span>(<span class="st">&quot;month&quot;</span>, <span class="st">&quot;day&quot;</span>),
  <span class="dt">variable.name =</span> <span class="st">&quot;climate_variable&quot;</span>, 
  <span class="dt">value.name =</span> <span class="st">&quot;climate_value&quot;</span>)
<span class="kw">head</span>(aql)</code></pre></div>
<pre><code>##   month day climate_variable climate_value
## 1     5   1            ozone            41
## 2     5   2            ozone            36
## 3     5   3            ozone            12
## 4     5   4            ozone            18
## 5     5   5            ozone            NA
## 6     5   6            ozone            28</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">dim</span>(aql)</code></pre></div>
<pre><code>## [1] 612   4</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">aql &lt;-<span class="st"> </span><span class="kw">melt</span>(airquality, <span class="dt">id.vars =</span> <span class="kw">c</span>(<span class="st">&quot;month&quot;</span>, <span class="st">&quot;day&quot;</span>), <span class="dt">measure.vars=</span><span class="kw">c</span>(<span class="st">&quot;ozone&quot;</span>,<span class="st">&#39;temp&#39;</span>),
  <span class="dt">variable.name =</span> <span class="st">&quot;climate_variable&quot;</span>, 
  <span class="dt">value.name =</span> <span class="st">&quot;climate_value&quot;</span>)
<span class="kw">dim</span>(aql)</code></pre></div>
<pre><code>## [1] 306   4</code></pre>
</section>
<section id="dcast-long--to-wide-format" class="slide level2">
<h2>dcast: long- to wide-format</h2>
<p>dcast uses a formula to describe the shape of the data. The arguments on the left refer to the ID variables and the arguments on the right refer to the measured variables.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">aql &lt;-<span class="st"> </span><span class="kw">melt</span>(airquality, <span class="dt">id.vars =</span> <span class="kw">c</span>(<span class="st">&quot;month&quot;</span>, <span class="st">&quot;day&quot;</span>))
aqw &lt;-<span class="st"> </span><span class="kw">dcast</span>(aql, month +<span class="st"> </span>day ~<span class="st"> </span>variable)
<span class="kw">head</span>(aqw)</code></pre></div>
<pre><code>##   month day ozone solar.r wind temp
## 1     5   1    41     190  7.4   67
## 2     5   2    36     118  8.0   72
## 3     5   3    12     149 12.6   74
## 4     5   4    18     313 11.5   62
## 5     5   5    NA      NA 14.3   56
## 6     5   6    28      NA 14.9   66</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(airquality) <span class="co"># original data</span></code></pre></div>
<pre><code>##   ozone solar.r wind temp month day
## 1    41     190  7.4   67     5   1
## 2    36     118  8.0   72     5   2
## 3    12     149 12.6   74     5   3
## 4    18     313 11.5   62     5   4
## 5    NA      NA 14.3   56     5   5
## 6    28      NA 14.9   66     5   6</code></pre>
</section>
<section id="dcast-summary" class="slide level2">
<h2>dcast summary</h2>
<p><img src="http://seananderson.ca/images/dcast-illustration.png" class="cover"></p>
</section>
<section id="aggregation" class="slide level2">
<h2>Aggregation</h2>
<p>… is used when there is more than one value per data cell. For example,</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">aql &lt;-<span class="st"> </span><span class="kw">melt</span>(airquality, <span class="dt">id.vars =</span> <span class="kw">c</span>(<span class="st">&quot;month&quot;</span>, <span class="st">&quot;day&quot;</span>))
<span class="kw">dcast</span>(aql, month ~<span class="st"> </span>variable)</code></pre></div>
<pre><code>## Aggregation function missing: defaulting to length</code></pre>
<pre><code>##   month ozone solar.r wind temp
## 1     5    31      31   31   31
## 2     6    30      30   30   30
## 3     7    31      31   31   31
## 4     8    31      31   31   31
## 5     9    30      30   30   30</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">dcast</span>(aql, month ~<span class="st"> </span>variable, <span class="dt">fun.aggregate =</span> mean, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</code></pre></div>
<pre><code>##   month    ozone  solar.r      wind     temp
## 1     5 23.61538 181.2963 11.622581 65.54839
## 2     6 29.44444 190.1667 10.266667 79.10000
## 3     7 59.11538 216.4839  8.941935 83.90323
## 4     8 59.96154 171.8571  8.793548 83.96774
## 5     9 31.44828 167.4333 10.180000 76.90000</code></pre>
</section>
<section id="more-arguments-for-dcast" class="slide level2">
<h2>More arguments for dcast</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">dcast</span>(data, formula, <span class="dt">fun.aggregate =</span> <span class="ot">NULL</span>, ..., <span class="dt">margins =</span> <span class="ot">NULL</span>,
  <span class="dt">subset =</span> <span class="ot">NULL</span>, <span class="dt">fill =</span> <span class="ot">NULL</span>, <span class="dt">drop =</span> <span class="ot">TRUE</span>,
  <span class="dt">value.var =</span> <span class="kw">guess_value</span>(data))</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">aql &lt;-<span class="st"> </span><span class="kw">melt</span>(airquality, <span class="dt">id.vars =</span> <span class="kw">c</span>(<span class="st">&quot;month&quot;</span>, <span class="st">&quot;day&quot;</span>))
<span class="kw">library</span>(plyr) <span class="co"># needed to access . function</span>
<span class="co"># subset</span>
<span class="kw">head</span>(<span class="kw">dcast</span>(aql, month +<span class="st"> </span>day ~<span class="st"> </span>variable, <span class="dt">subset =</span> .(variable ==<span class="st"> &#39;temp&#39;</span>))) </code></pre></div>
<pre><code>##   month day temp
## 1     5   1   67
## 2     5   2   72
## 3     5   3   74
## 4     5   4   62
## 5     5   5   56
## 6     5   6   66</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># summarize rows and columns</span>
<span class="kw">head</span>(<span class="kw">dcast</span>(aql, month ~<span class="st"> </span>variable, <span class="dt">fun.aggregate =</span> max, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>, <span class="dt">margins =</span> T))</code></pre></div>
<pre><code>## Warning in .fun(.value[0], ...): no non-missing arguments to max; returning
## -Inf</code></pre>
<pre><code>##   month ozone solar.r wind temp (all)
## 1     5   115     334 20.1   81   334
## 2     6    71     332 20.7   93   332
## 3     7   135     314 14.9   92   314
## 4     8   168     273 15.5   97   273
## 5     9    96     259 16.6   93   259
## 6 (all)   168     334 20.7   97   334</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(<span class="kw">dcast</span>(aql, month ~<span class="st"> </span>variable, <span class="dt">fun.aggregate =</span> mean, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>, <span class="dt">margins =</span> T))</code></pre></div>
<pre><code>##   month    ozone  solar.r      wind     temp    (all)
## 1     5 23.61538 181.2963 11.622581 65.54839 68.70696
## 2     6 29.44444 190.1667 10.266667 79.10000 87.38384
## 3     7 59.11538 216.4839  8.941935 83.90323 93.49748
## 4     8 59.96154 171.8571  8.793548 83.96774 79.71207
## 5     9 31.44828 167.4333 10.180000 76.90000 71.82689
## 6 (all) 42.12931 185.9315  9.957516 77.88235 80.05722</code></pre>
</section>
<section id="reshape2-is-retired" class="titleslide slide level1"><h2 class="shout">Reshape2 is retired!</h2></section><section id="tidying-data" class="slide level2">
<h2>Tidying data</h2>
<blockquote>
<p>Happy families are all alike; every unhappy family is unhappy in its own way.</p>
</blockquote>
<p><strong>Leo Tolstoy</strong></p>
<blockquote>
<p>Tidy datasets are all alike but every messy dataset is messy in its own way.</p>
</blockquote>
<p><strong>Hadley Wickham </strong></p>
</section><section id="rethinking-of-data" class="slide level2">
<h2>Rethinking of data</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">read.csv</span>(<span class="st">&quot;preg.csv&quot;</span>, <span class="dt">stringsAsFactors =</span> <span class="ot">FALSE</span>)
<span class="co">#&gt;           name treatmenta treatmentb</span>
<span class="co">#&gt; 1   John Smith         NA         18</span>
<span class="co">#&gt; 2     Jane Doe          4          1</span>
<span class="co">#&gt; 3 Mary Johnson          6          7</span>

<span class="kw">read.csv</span>(<span class="st">&quot;preg2.csv&quot;</span>, <span class="dt">stringsAsFactors =</span> <span class="ot">FALSE</span>)
<span class="co">#&gt;   treatment John.Smith Jane.Doe Mary.Johnson</span>
<span class="co">#&gt; 1         a         NA        4            6</span>
<span class="co">#&gt; 2         b         18        1            7</span></code></pre></div>
</section><section id="rethinking-of-data-1" class="slide level2">
<h2>Rethinking of data</h2>
<blockquote>
<p>A dataset is a collection of <em>values</em>. Every value belongs to a <em>variable</em> and an <em>observation</em>. (<a href="http://vita.had.co.nz/papers/tidy-data.html" class="uri">http://vita.had.co.nz/papers/tidy-data.html</a>)</p>
</blockquote>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">preg2
<span class="co">#&gt;           name treatment  n</span>
<span class="co">#&gt; 1     Jane Doe         a  4</span>
<span class="co">#&gt; 2     Jane Doe         b  1</span>
<span class="co">#&gt; 3   John Smith         a NA</span>
<span class="co">#&gt; 4   John Smith         b 18</span>
<span class="co">#&gt; 5 Mary Johnson         a  6</span>
<span class="co">#&gt; 6 Mary Johnson         b  7</span></code></pre></div>
</section><section id="tidyr" class="slide level2">
<h2>tidyr</h2>
<p>The goal of tidyr is to help you create a tidy data. Tidy data is data where:</p>
<ol type="1">
<li>Each variable is in a column.</li>
<li>Each observation is a row.</li>
<li>Each value is a cell.</li>
</ol>
</section><section id="common-types-of-messy-datasets" class="slide level2">
<h2>Common types of messy datasets</h2>
<ol type="1">
<li>Column headers are values, not variable names</li>
<li>Multiple variables stored in one column</li>
<li>Variables are stored in both rows and columns</li>
<li>Multiple types in one table</li>
<li>One type in multiple tables</li>
</ol>
</section><section id="column-headers-are-values-not-variable-names" class="slide level2">
<h2>1. Column headers are values, not variable names</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># This dataset explores the relationship between income and religion in the US.</span>
pew &lt;-<span class="st"> </span><span class="kw">tbl_df</span>(<span class="kw">read.csv</span>(<span class="st">&quot;pew.csv&quot;</span>, <span class="dt">stringsAsFactors =</span> <span class="ot">FALSE</span>, <span class="dt">check.names =</span> <span class="ot">FALSE</span>))
<span class="co">#&gt; # A tibble: 18 × 11</span>
<span class="co">#&gt;                   religion `&lt;$10k` `$10-20k` `$20-30k` `$30-40k` `$40-50k`</span>
<span class="co">#&gt;                      &lt;chr&gt;   &lt;int&gt;     &lt;int&gt;     &lt;int&gt;     &lt;int&gt;     &lt;int&gt;</span>
<span class="co">#&gt;  1                Agnostic      27        34        60        81        76</span>
<span class="co">#&gt;  2                 Atheist      12        27        37        52        35</span>
<span class="co">#&gt;  3                Buddhist      27        21        30        34        33</span>
<span class="co">#&gt;  4                Catholic     418       617       732       670       638</span>
<span class="co">#&gt;  5      Don’t know/refused      15        14        15        11        10</span>
<span class="co">#&gt;  6        Evangelical Prot     575       869      1064       982       881</span>
<span class="co">#&gt;  7                   Hindu       1         9         7         9        11</span>
<span class="co">#&gt;  8 Historically Black Prot     228       244       236       238       197</span>
<span class="co">#&gt; # ... with 8 more rows, and 5 more variables: `$50-75k` &lt;int&gt;,</span>
<span class="co">#&gt; #   `$75-100k` &lt;int&gt;, `$100-150k` &lt;int&gt;, `&gt;150k` &lt;int&gt;, `Don&#39;t</span>
<span class="co">#&gt; #   know/refused` &lt;int&gt;</span></code></pre></div>
</section><section id="section-1" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">pew %&gt;%<span class="st"> </span><span class="kw">gather</span>(income, frequency, -religion)
<span class="co">#&gt; # A tibble: 180 × 3</span>
<span class="co">#&gt;                   religion income frequency</span>
<span class="co">#&gt;                      &lt;chr&gt;  &lt;chr&gt;     &lt;int&gt;</span>
<span class="co">#&gt;  1                Agnostic  &lt;$10k        27</span>
<span class="co">#&gt;  2                 Atheist  &lt;$10k        12</span>
<span class="co">#&gt;  3                Buddhist  &lt;$10k        27</span>
<span class="co">#&gt;  4                Catholic  &lt;$10k       418</span>
<span class="co">#&gt;  5      Don’t know/refused  &lt;$10k        15</span>
<span class="co">#&gt;  6        Evangelical Prot  &lt;$10k       575</span>
<span class="co">#&gt;  7                   Hindu  &lt;$10k         1</span>
<span class="co">#&gt;  8 Historically Black Prot  &lt;$10k       228</span>
<span class="co">#&gt;  9       Jehovah&#39;s Witness  &lt;$10k        20</span>
<span class="co">#&gt; 10                  Jewish  &lt;$10k        19</span>
<span class="co">#&gt; # ... with 170 more rows</span></code></pre></div>
</section><section id="multiple-variables-stored-in-one-column" class="slide level2">
<h2>2. Multiple variables stored in one column</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># WHO dataset for the counts of confirmed tuberculosis cases by country, year, and demographic group</span>
<span class="co"># The demographic groups are broken down by sex (m, f) and age (0-14, 15-25, 25-34, 35-44, 45-54, 55-64, unknown).</span>
tb &lt;-<span class="st"> </span><span class="kw">tbl_df</span>(<span class="kw">read.csv</span>(<span class="st">&quot;tb.csv&quot;</span>, <span class="dt">stringsAsFactors =</span> <span class="ot">FALSE</span>))
<span class="co">#&gt; # A tibble: 5,769 × 22</span>
<span class="co">#&gt;     iso2  year   m04  m514  m014 m1524 m2534 m3544 m4554 m5564   m65    mu</span>
<span class="co">#&gt;    &lt;chr&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;</span>
<span class="co">#&gt;  1    AD  1989    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA</span>
<span class="co">#&gt;  2    AD  1990    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA</span>
<span class="co">#&gt;  3    AD  1991    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA</span>
<span class="co">#&gt;  4    AD  1992    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA</span>
<span class="co">#&gt;  5    AD  1993    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA</span>
<span class="co">#&gt;  6    AD  1994    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA</span>
<span class="co">#&gt;  7    AD  1996    NA    NA     0     0     0     4     1     0     0    NA</span>
<span class="co">#&gt; # ... with 5,759 more rows, and 10 more variables: f04 &lt;int&gt;, f514 &lt;int&gt;,</span>
<span class="co">#&gt; #   f014 &lt;int&gt;, f1524 &lt;int&gt;, f2534 &lt;int&gt;, f3544 &lt;int&gt;, f4554 &lt;int&gt;,</span>
<span class="co">#&gt; #   f5564 &lt;int&gt;, f65 &lt;int&gt;, fu &lt;int&gt;</span></code></pre></div>
</section><section id="section-2" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># We first gather up the non-variable columns:</span>
tb2 &lt;-<span class="st"> </span>tb %&gt;%<span class="st"> </span>
<span class="st">  </span><span class="kw">gather</span>(demo, n, -iso2, -year, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)
tb2
<span class="co">#&gt; # A tibble: 35,750 × 4</span>
<span class="co">#&gt;     iso2  year  demo     n</span>
<span class="co">#&gt;  * &lt;chr&gt; &lt;int&gt; &lt;chr&gt; &lt;int&gt;</span>
<span class="co">#&gt;  1    AD  2005   m04     0</span>
<span class="co">#&gt;  2    AD  2006   m04     0</span>
<span class="co">#&gt;  3    AD  2008   m04     0</span>
<span class="co">#&gt;  4    AE  2006   m04     0</span>
<span class="co">#&gt;  5    AE  2007   m04     0</span>
<span class="co">#&gt;  6    AE  2008   m04     0</span>
<span class="co">#&gt; # ... with 35,740 more rows</span></code></pre></div>
</section><section id="section-3" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Then use separate() to split a compound variables into individual variables.</span>
tb3 &lt;-<span class="st"> </span>tb2 %&gt;%<span class="st"> </span>
<span class="st">  </span><span class="kw">separate</span>(demo, <span class="kw">c</span>(<span class="st">&quot;sex&quot;</span>, <span class="st">&quot;age&quot;</span>), <span class="dv">1</span>)
tb3
<span class="co">#&gt; # A tibble: 35,750 × 5</span>
<span class="co">#&gt;     iso2  year   sex   age     n</span>
<span class="co">#&gt;  * &lt;chr&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt; &lt;int&gt;</span>
<span class="co">#&gt;  1    AD  2005     m    04     0</span>
<span class="co">#&gt;  2    AD  2006     m    04     0</span>
<span class="co">#&gt;  3    AD  2008     m    04     0</span>
<span class="co">#&gt;  4    AE  2006     m    04     0</span>
<span class="co">#&gt;  5    AE  2007     m    04     0</span>
<span class="co">#&gt;  6    AE  2008     m    04     0</span>
<span class="co">#&gt; # ... with 35,740 more rows</span></code></pre></div>
</section><section id="variables-are-stored-in-both-rows-and-columns" class="slide level2">
<h2>3. Variables are stored in both rows and columns</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># daily weather data for one weather station (MX17004) in Mexico for five months in 2010.</span>
<span class="co"># It has variables in individual columns (id, year, month), spread across columns (day, d1-d31) and across rows (tmin, tmax) (minimum and maximum temperature). </span>
weather &lt;-<span class="st"> </span><span class="kw">tbl_df</span>(<span class="kw">read.csv</span>(<span class="st">&quot;weather.csv&quot;</span>, <span class="dt">stringsAsFactors =</span> <span class="ot">FALSE</span>))
<span class="co">#&gt; # A tibble: 22 × 35</span>
<span class="co">#&gt;         id  year month element    d1    d2    d3    d4    d5    d6    d7</span>
<span class="co">#&gt;      &lt;chr&gt; &lt;int&gt; &lt;int&gt;   &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span>
<span class="co">#&gt;  1 MX17004  2010     1    tmax    NA    NA    NA    NA    NA    NA    NA</span>
<span class="co">#&gt;  2 MX17004  2010     1    tmin    NA    NA    NA    NA    NA    NA    NA</span>
<span class="co">#&gt;  3 MX17004  2010     2    tmax    NA  27.3  24.1    NA    NA    NA    NA</span>
<span class="co">#&gt;  4 MX17004  2010     2    tmin    NA  14.4  14.4    NA    NA    NA    NA</span>
<span class="co">#&gt;  5 MX17004  2010     3    tmax    NA    NA    NA    NA  32.1    NA    NA</span>
<span class="co">#&gt;  6 MX17004  2010     3    tmin    NA    NA    NA    NA  14.2    NA    NA</span>
<span class="co">#&gt; # ... with 12 more rows, and 24 more variables: d8 &lt;dbl&gt;, d9 &lt;lgl&gt;,</span>
<span class="co">#&gt; #   d10 &lt;dbl&gt;, d11 &lt;dbl&gt;, d12 &lt;lgl&gt;, d13 &lt;dbl&gt;, d14 &lt;dbl&gt;, d15 &lt;dbl&gt;,</span>
<span class="co">#&gt; #   d16 &lt;dbl&gt;, d17 &lt;dbl&gt;, d18 &lt;lgl&gt;, d19 &lt;lgl&gt;, d20 &lt;lgl&gt;, d21 &lt;lgl&gt;,</span>
<span class="co">#&gt; #   d22 &lt;lgl&gt;, d23 &lt;dbl&gt;, d24 &lt;lgl&gt;, d25 &lt;dbl&gt;, d26 &lt;dbl&gt;, d27 &lt;dbl&gt;,</span>
<span class="co">#&gt; #   d28 &lt;dbl&gt;, d29 &lt;dbl&gt;, d30 &lt;dbl&gt;, d31 &lt;dbl&gt;</span></code></pre></div>
</section><section id="section-4" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># we first gather the day columns:</span>
weather2 &lt;-<span class="st"> </span>weather %&gt;%
<span class="st">  </span><span class="kw">gather</span>(day, value, d1:d31, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)
weather2
<span class="co">#&gt; # A tibble: 66 × 6</span>
<span class="co">#&gt;         id  year month element   day value</span>
<span class="co">#&gt;  *   &lt;chr&gt; &lt;int&gt; &lt;int&gt;   &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt;</span>
<span class="co">#&gt;  1 MX17004  2010    12    tmax    d1  29.9</span>
<span class="co">#&gt;  2 MX17004  2010    12    tmin    d1  13.8</span>
<span class="co">#&gt;  3 MX17004  2010     2    tmax    d2  27.3</span>
<span class="co">#&gt;  4 MX17004  2010     2    tmin    d2  14.4</span>
<span class="co">#&gt;  5 MX17004  2010    11    tmax    d2  31.3</span>
<span class="co">#&gt;  6 MX17004  2010    11    tmin    d2  16.3</span></code></pre></div>
</section><section id="section-5" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># and a little cleaning</span>
weather3 &lt;-<span class="st"> </span>weather2 %&gt;%<span class="st"> </span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">day =</span> <span class="kw">extract_numeric</span>(day)) %&gt;%
<span class="st">  </span><span class="kw">select</span>(id, year, month, day, element, value) %&gt;%
<span class="st">  </span><span class="kw">arrange</span>(id, year, month, day)
<span class="co">#&gt; extract_numeric() is deprecated: please use readr::parse_number() instead</span>
weather3
<span class="co">#&gt; # A tibble: 66 × 6</span>
<span class="co">#&gt;         id  year month   day element value</span>
<span class="co">#&gt;      &lt;chr&gt; &lt;int&gt; &lt;int&gt; &lt;dbl&gt;   &lt;chr&gt; &lt;dbl&gt;</span>
<span class="co">#&gt;  1 MX17004  2010     1    30    tmax  27.8</span>
<span class="co">#&gt;  2 MX17004  2010     1    30    tmin  14.5</span>
<span class="co">#&gt;  3 MX17004  2010     2     2    tmax  27.3</span>
<span class="co">#&gt;  4 MX17004  2010     2     2    tmin  14.4</span>
<span class="co">#&gt;  5 MX17004  2010     2     3    tmax  24.1</span></code></pre></div>
</section><section id="section-6" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># then spread the element and value columns back out into the columns</span>
weather3 %&gt;%<span class="st"> </span><span class="kw">spread</span>(element, value)
<span class="co">#&gt; # A tibble: 33 × 6</span>
<span class="co">#&gt;         id  year month   day  tmax  tmin</span>
<span class="co">#&gt;  *   &lt;chr&gt; &lt;int&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span>
<span class="co">#&gt;  1 MX17004  2010     1    30  27.8  14.5</span>
<span class="co">#&gt;  2 MX17004  2010     2     2  27.3  14.4</span>
<span class="co">#&gt;  3 MX17004  2010     2     3  24.1  14.4</span>
<span class="co">#&gt;  4 MX17004  2010     2    11  29.7  13.4</span>
<span class="co">#&gt;  5 MX17004  2010     2    23  29.9  10.7</span>
<span class="co">#&gt;  6 MX17004  2010     3     5  32.1  14.2</span>
<span class="co">#&gt; # ... with 23 more rows</span></code></pre></div>
</section><section id="multiple-types-in-one-table" class="slide level2">
<h2>4. Multiple types in one table</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># the date a song first entered the billboard top 100 and the rank in each week after it enters</span>
billboard &lt;-<span class="st"> </span><span class="kw">tbl_df</span>(<span class="kw">read.csv</span>(<span class="st">&quot;billboard.csv&quot;</span>, <span class="dt">stringsAsFactors =</span> <span class="ot">FALSE</span>))
billboard
<span class="co">#&gt; # A tibble: 317 × 81</span>
<span class="co">#&gt;     year         artist                   track  time date.entered   wk1</span>
<span class="co">#&gt;    &lt;int&gt;          &lt;chr&gt;                   &lt;chr&gt; &lt;chr&gt;        &lt;chr&gt; &lt;int&gt;</span>
<span class="co">#&gt;  1  2000          2 Pac Baby Don&#39;t Cry (Keep...  4:22   2000-02-26    87</span>
<span class="co">#&gt;  2  2000        2Ge+her The Hardest Part Of ...  3:15   2000-09-02    91</span>
<span class="co">#&gt;  3  2000   3 Doors Down              Kryptonite  3:53   2000-04-08    81</span>
<span class="co">#&gt;  4  2000   3 Doors Down                   Loser  4:24   2000-10-21    76</span>
<span class="co">#&gt;  5  2000       504 Boyz           Wobble Wobble  3:35   2000-04-15    57</span>
<span class="co">#&gt;  6  2000           98^0 Give Me Just One Nig...  3:24   2000-08-19    51</span>
<span class="co">#&gt; # ... with 307 more rows, and 75 more variables: wk2 &lt;int&gt;, wk3 &lt;int&gt;,</span>
<span class="co">#&gt; #   wk4 &lt;int&gt;, wk5 &lt;int&gt;, wk6 &lt;int&gt;, wk7 &lt;int&gt;, wk8 &lt;int&gt;, wk9 &lt;int&gt;,</span>
<span class="co">#&gt; #   wk10 &lt;int&gt;, wk11 &lt;int&gt;, wk12 &lt;int&gt;, wk13 &lt;int&gt;, wk14 &lt;int&gt;,</span>
<span class="co">#&gt; #   wk15 &lt;int&gt;, wk16 &lt;int&gt;, wk17 &lt;int&gt;, wk18 &lt;int&gt;, wk19 &lt;int&gt;,</span>
<span class="co">#&gt; #   wk20 &lt;int&gt;, wk21 &lt;int&gt;, wk22 &lt;int&gt;, wk23 &lt;int&gt;, wk24 &lt;int&gt;,</span>
<span class="co">#&gt; #   wk25 &lt;int&gt;, wk26 &lt;int&gt;, wk27 &lt;int&gt;, wk28 &lt;int&gt;, wk29 &lt;int&gt;, .... wk76</span></code></pre></div>
</section><section id="section-7" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># gather week, convert week to number, date</span>
billboard3 &lt;-<span class="st"> </span>billboard %&gt;%<span class="st"> </span>
<span class="st">  </span><span class="kw">gather</span>(week, rank, wk1:wk76, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>) %&gt;%
<span class="st">  </span><span class="kw">mutate</span>(
    <span class="dt">week =</span> <span class="kw">extract_numeric</span>(week),
    <span class="dt">date =</span> <span class="kw">as.Date</span>(date.entered) +<span class="st"> </span><span class="dv">7</span> *<span class="st"> </span>(week -<span class="st"> </span><span class="dv">1</span>)) %&gt;%
<span class="st">  </span><span class="kw">select</span>(-date.entered) %&gt;%<span class="st"> </span><span class="kw">arrange</span>(artist, track, week)
<span class="co">#&gt; # A tibble: 5,307 × 7</span>
<span class="co">#&gt;     year  artist                   track  time  week  rank       date</span>
<span class="co">#&gt;    &lt;int&gt;   &lt;chr&gt;                   &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;int&gt;     &lt;date&gt;</span>
<span class="co">#&gt;  1  2000   2 Pac Baby Don&#39;t Cry (Keep...  4:22     1    87 2000-02-26</span>
<span class="co">#&gt;  2  2000   2 Pac Baby Don&#39;t Cry (Keep...  4:22     2    82 2000-03-04</span>
<span class="co">#&gt;  3  2000   2 Pac Baby Don&#39;t Cry (Keep...  4:22     3    72 2000-03-11</span>
<span class="co">#&gt;  4  2000   2 Pac Baby Don&#39;t Cry (Keep...  4:22     4    77 2000-03-18</span>
<span class="co">#&gt;  5  2000   2 Pac Baby Don&#39;t Cry (Keep...  4:22     5    87 2000-03-25</span>
<span class="co">#&gt;  6  2000   2 Pac Baby Don&#39;t Cry (Keep...  4:22     6    94 2000-04-01</span></code></pre></div>
</section><section id="section-8" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># split billboard3 into song and rank</span>
song &lt;-<span class="st"> </span>billboard3 %&gt;%<span class="st"> </span>
<span class="st">  </span><span class="kw">select</span>(artist, track, year, time) %&gt;%
<span class="st">  </span><span class="kw">unique</span>() %&gt;%
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">song_id =</span> <span class="kw">row_number</span>())
song
<span class="co">#&gt; # A tibble: 317 × 5</span>
<span class="co">#&gt;            artist                   track  year  time song_id</span>
<span class="co">#&gt;             &lt;chr&gt;                   &lt;chr&gt; &lt;int&gt; &lt;chr&gt;   &lt;int&gt;</span>
<span class="co">#&gt;  1          2 Pac Baby Don&#39;t Cry (Keep...  2000  4:22       1</span>
<span class="co">#&gt;  2        2Ge+her The Hardest Part Of ...  2000  3:15       2</span>
<span class="co">#&gt;  3   3 Doors Down              Kryptonite  2000  3:53       3</span>
<span class="co">#&gt;  4   3 Doors Down                   Loser  2000  4:24       4</span>
<span class="co">#&gt;  5       504 Boyz           Wobble Wobble  2000  3:35       5</span>
<span class="co">#&gt;  6           98^0 Give Me Just One Nig...  2000  3:24       6</span></code></pre></div>
</section><section id="section-9" class="slide level2">
<h2></h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># split billboard3 into song and rank</span>
<span class="co"># by replacing repeated song facts with a pointer to song details (a unique song id)</span>
rank &lt;-<span class="st"> </span>billboard3 %&gt;%
<span class="st">  </span><span class="kw">left_join</span>(song, <span class="kw">c</span>(<span class="st">&quot;artist&quot;</span>, <span class="st">&quot;track&quot;</span>, <span class="st">&quot;year&quot;</span>, <span class="st">&quot;time&quot;</span>)) %&gt;%
<span class="st">  </span><span class="kw">select</span>(song_id, date, week, rank) %&gt;%
<span class="st">  </span><span class="kw">arrange</span>(song_id, date)
rank
<span class="co">#&gt; # A tibble: 5,307 × 4</span>
<span class="co">#&gt;    song_id       date  week  rank</span>
<span class="co">#&gt;      &lt;int&gt;     &lt;date&gt; &lt;dbl&gt; &lt;int&gt;</span>
<span class="co">#&gt;  1       1 2000-02-26     1    87</span>
<span class="co">#&gt;  2       1 2000-03-04     2    82</span>
<span class="co">#&gt;  3       1 2000-03-11     3    72</span>
<span class="co">#&gt;  4       1 2000-03-18     4    77</span>
<span class="co">#&gt;  5       1 2000-03-25     5    87</span>
<span class="co">#&gt;  6       1 2000-04-01     6    94</span></code></pre></div>
</section><section id="one-type-in-multiple-tables" class="slide level2">
<h2>5. One type in multiple tables</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># ldply() loops over each path, reading in the csv file and combining the results into a single data frame.</span>
<span class="kw">library</span>(plyr)
paths &lt;-<span class="st"> </span><span class="kw">dir</span>(<span class="st">&quot;data&quot;</span>, <span class="dt">pattern =</span> <span class="st">&quot;</span><span class="ch">\\</span><span class="st">.csv$&quot;</span>, <span class="dt">full.names =</span> <span class="ot">TRUE</span>)
<span class="kw">names</span>(paths) &lt;-<span class="st"> </span><span class="kw">basename</span>(paths)
<span class="kw">ldply</span>(paths, read.csv, <span class="dt">stringsAsFactors =</span> <span class="ot">FALSE</span>)</code></pre></div>
</section><section id="tidyr-vs.reshape2" class="slide level2">
<h2>Tidyr vs. Reshape2</h2>
<ol type="1">
<li>They are very similar!</li>
<li>cast() in reshape2 can work on matrix/array, while gather() in tidyr can only work on data.frame.</li>
<li>reshape2 can do aggregation, while tidyr is not designed for this purpose.</li>
<li>colsplit() in reshape2 operates only on a single column while separate() in tidyr performs all the operation at once.</li>
</ol>
</section><section id="references" class="slide level2">
<h2>References</h2>
<h3 id="reshape2-httpseananderson.ca20131019reshape.html">Reshape2: <a href="http://seananderson.ca/2013/10/19/reshape.html" class="uri">http://seananderson.ca/2013/10/19/reshape.html</a></h3>
<h3 id="tidyr-httptidyr.tidyverse.orgarticlestidy-data.html">Tidyr: <a href="http://tidyr.tidyverse.org/articles/tidy-data.html" class="uri">http://tidyr.tidyverse.org/articles/tidy-data.html</a></h3>
<h3 id="making-ppt-with-rmarkdown-httpsgithub.commangothecatrmdshower">Making ppt with Rmarkdown: <a href="https://github.com/MangoTheCat/rmdshower" class="uri">https://github.com/MangoTheCat/rmdshower</a></h3>
<h3 id="rmd-code-for-this-slide-httpsdrive.google.comopenid1kmuo-objushhe-x39xgfchabrpb8u40q">Rmd code for this slide: <a href="https://drive.google.com/open?id=1KMUO-objuSHhE-X39XGFChaBRPB8U40q" class="uri">https://drive.google.com/open?id=1KMUO-objuSHhE-X39XGFChaBRPB8U40q</a></h3>
</section>
<section id="thank-you" class="titleslide slide level1"><h2 class="shout">THANK YOU</h2></section></section>

  <!--
  To hide progress bar from entire presentation
  just remove “progress” element.
  -->
  <!-- <div class="progress"></div> -->
  <script src="20180212_Reshape2_and_Tidyr_files/rmdshower/node_modules/shower/node_modules/shower-core/shower.min.js"></script>
  <!-- Copyright © 2015 Yours Truly, Famous Inc. -->
  <!-- Photos by John Carey, fiftyfootshadows.net -->

    <script>renderMathInElement(document.body);</script>
  
  
</body>
</html>
