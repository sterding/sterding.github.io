---
layout: post
title: Uniq and basic set theory
date: '2012-06-11T17:02:00.000-04:00'
author: Xianjun Dong
tags:
- uniq
- sort
- union
- difference
- unix
- intersection
modified_time: '2012-06-11T17:02:20.845-04:00'
blogger_id: tag:blogger.com,1999:blog-12445049.post-8655789696848719890
blogger_orig_url: http://onetipperday.blogspot.com/2012/06/uniq-and-basic-set-theory.html
---

<b id="internal-source-marker_0.94179826695472" style="font-weight: normal;"><span style="font-family: Arial; font-size: 16px; vertical-align: baseline; white-space: pre-wrap;">Reference: <a href="http://linux.byexamples.com/archives/127/uniq-and-basic-set-theory/">Uniq and basic set theory » Linux by Examples</a></span></b><br /><b style="font-weight: normal;"><span style="font-family: Arial;"><span style="white-space: pre-wrap;"><br /></span></span><span style="font-family: Arial; font-size: 15px; vertical-align: baseline; white-space: pre-wrap;">Imagine that I have two files:</span><br /><span style="font-family: Arial; font-size: 15px; vertical-align: baseline; white-space: pre-wrap;">aquatic - contains a list of aquatic animals</span><br /><span style="font-family: 'Courier New'; font-size: 15px; vertical-align: baseline; white-space: pre-wrap;">starfish<br class="kix-line-break" />whale<br class="kix-line-break" />nemo<br class="kix-line-break" />crab<br class="kix-line-break" />dolphin</span><br /><span style="font-family: Arial; font-size: 15px; vertical-align: baseline; white-space: pre-wrap;">mammal - contains a list of mammals</span><br /><span style="font-family: 'Courier New'; font-size: 15px; vertical-align: baseline; white-space: pre-wrap;">whale<br class="kix-line-break" />RMS<br class="kix-line-break" />batman<br class="kix-line-break" />dolphin<br class="kix-line-break" />scooby-doo</span></b><br /><b style="font-weight: normal;"><span style="font-family: 'Courier New';"><span style="font-size: 15px; white-space: pre-wrap;"><br /></span></span><span style="font-family: Arial; font-size: 15px; vertical-align: baseline; white-space: pre-wrap;">Given aquatic and mammal are two different sets, let’s use sort and uniq to play with a few basic set theory operations:</span><br /><a href="http://en.wikipedia.org/wiki/Union_%28set_theory%29"><span style="font-family: Arial; font-size: 15px; font-weight: bold; vertical-align: baseline; white-space: pre-wrap;">Union</span></a><span style="font-family: Arial; font-size: 15px; vertical-align: baseline; white-space: pre-wrap;"> (</span><span style="font-family: Arial; font-size: 15px; font-style: italic; vertical-align: baseline; white-space: pre-wrap;"> A U B</span><span style="font-family: Arial; font-size: 15px; vertical-align: baseline; white-space: pre-wrap;"> - members in either A or B )</span><br /><span style="font-family: Arial; font-size: 15px; font-style: italic; vertical-align: baseline; white-space: pre-wrap;">aquatic U mamal= {batman, crab, dolphin, nemo, RMS, scooby-doo, starfish, whale}</span><br /><span style="font-family: 'Courier New'; font-size: 15px; vertical-align: baseline; white-space: pre-wrap;">sort aquatic mammal | uniq </span><br /><a href="http://en.wikipedia.org/wiki/Intersection_%28set_theory%29"><span style="font-family: Arial; font-size: 15px; font-weight: bold; vertical-align: baseline; white-space: pre-wrap;">Intersection</span></a><span style="font-family: Arial; font-size: 15px; vertical-align: baseline; white-space: pre-wrap;"> ( </span><span style="font-family: Arial; font-size: 15px; font-style: italic; vertical-align: baseline; white-space: pre-wrap;">A ∩ B</span><span style="font-family: Arial; font-size: 15px; vertical-align: baseline; white-space: pre-wrap;"> - members in both A and B )</span><br /><span style="font-family: Arial; font-size: 15px; font-style: italic; vertical-align: baseline; white-space: pre-wrap;">aquatic ∩ mammal = {dolphin, whale}</span><br /><span style="font-family: 'Courier New'; font-size: 15px; vertical-align: baseline; white-space: pre-wrap;">sort aquatic mammal | uniq -d</span><br /><a href="http://en.wikipedia.org/wiki/Symmetric_difference"><span style="font-family: Arial; font-size: 15px; font-weight: bold; vertical-align: baseline; white-space: pre-wrap;">Symmetric Difference</span></a><span style="font-family: Arial; font-size: 15px; vertical-align: baseline; white-space: pre-wrap;"> ( </span><span style="font-family: Arial; font-size: 15px; font-style: italic; vertical-align: baseline; white-space: pre-wrap;">A ^ B</span><span style="font-family: Arial; font-size: 15px; vertical-align: baseline; white-space: pre-wrap;"> - members in A or B but not both )</span><br /><span style="font-family: Arial; font-size: 15px; font-style: italic; vertical-align: baseline; white-space: pre-wrap;">aquatic ^ mammal = {batman, crab, nemo, RMS, scooby-doo, starfish}</span><br /><span style="font-family: 'Courier New'; font-size: 15px; vertical-align: baseline; white-space: pre-wrap;">sort aquatic mammal | uniq -u</span><br /><a href="http://en.wikipedia.org/wiki/Complement_%28set_theory%29"><span style="font-family: Arial; font-size: 15px; font-weight: bold; vertical-align: baseline; white-space: pre-wrap;">Relative Complement</span></a><span style="font-family: Arial; font-size: 15px; vertical-align: baseline; white-space: pre-wrap;"> ( </span><span style="font-family: Arial; font-size: 15px; font-style: italic; vertical-align: baseline; white-space: pre-wrap;">A \ B</span><span style="font-family: Arial; font-size: 15px; vertical-align: baseline; white-space: pre-wrap;"> - members in A but not in B )</span><br /><span style="font-family: Arial; font-size: 15px; font-style: italic; vertical-align: baseline; white-space: pre-wrap;">aquatic \ mammal = {crab, nemo, starfish}</span><br /><span style="font-family: 'Courier New'; font-size: 15px; vertical-align: baseline; white-space: pre-wrap;">sort aquatic mammal | uniq -d | sort aquatic - | uniq -u</span></b><br /><ul style="margin-bottom: 0pt; margin-top: 0pt;"><li style="font-family: Arial; font-size: 15px; list-style-type: disc; margin-left: 16px; vertical-align: baseline;"><b id="internal-source-marker_0.94179826695472" style="font-weight: normal;"><span style="vertical-align: baseline; white-space: pre-wrap;">"sort aquatic mammal | uniq -d" performs an intersection: </span><span style="font-style: italic; vertical-align: baseline; white-space: pre-wrap;">aquatic <b id="internal-source-marker_0.94179826695472" style="font-family: Times; font-size: medium; font-style: normal; font-weight: normal; white-space: normal;"><span style="font-family: Arial; font-size: 15px; font-style: italic; vertical-align: baseline; white-space: pre-wrap;">∩</span></b> mammal = {dolphin, whale}</span><span style="vertical-align: baseline; white-space: pre-wrap;">.</span></b></li><li style="font-family: Arial; font-size: 15px; list-style-type: disc; margin-left: 16px; vertical-align: baseline;"><b id="internal-source-marker_0.94179826695472" style="font-weight: normal;"><span style="vertical-align: baseline; white-space: pre-wrap;">"sort aquatic - | uniq -u” performs a symmetric difference: </span><span style="font-style: italic; vertical-align: baseline; white-space: pre-wrap;">aquatic ^ {dolphin, whale} = {crab, nemo, starfish}.</span></b></li></ul><b id="internal-source-marker_0.94179826695472" style="font-weight: normal;"><span style="font-family: Arial; font-size: 15px; vertical-align: baseline; white-space: pre-wrap;">UPDATED</span><span style="font-family: Arial; font-size: 15px; font-weight: bold; vertical-align: baseline; white-space: pre-wrap;">: </span><span style="font-family: Arial; font-size: 15px; vertical-align: baseline; white-space: pre-wrap;">I found a piece of </span><a href="http://wooledge.org/mywiki/BashFaq#head-e8d1cdf7002d7aa2a032be609dfcfa2ec7a72f3c"><span style="font-family: Arial; font-size: 15px; vertical-align: baseline; white-space: pre-wrap;">clean elegant codes</span></a><span style="font-family: Arial; font-size: 15px; vertical-align: baseline; white-space: pre-wrap;"> to perform relative complement:</span><br /><span style="font-family: 'Courier New'; font-size: 15px; vertical-align: baseline; white-space: pre-wrap;">sort aquatic mammal mammal | uniq -u</span><br /><span style="font-family: Arial; font-size: 15px; vertical-align: baseline; white-space: pre-wrap;">.</span><br /><span style="font-family: Arial; font-size: 15px; font-weight: bold; vertical-align: baseline; white-space: pre-wrap;">“sort -u”: a short-hand for “sort | uniq”</span><br /><span style="font-family: Arial; font-size: 15px; vertical-align: baseline; white-space: pre-wrap;">sort -u is equivalent to sort | uniq to eliminate duplicated elements in a list. Therefore, you may replace:</span><br /><span style="font-family: 'Courier New'; font-size: 15px; vertical-align: baseline; white-space: pre-wrap;">sort aquatic mammal | uniq</span><br /><span style="font-family: Arial; font-size: 15px; vertical-align: baseline; white-space: pre-wrap;">with:</span><br /><span style="font-family: 'Courier New'; font-size: 15px; vertical-align: baseline; white-space: pre-wrap;">sort -u aquatic mammal</span><br /><span style="font-family: Arial; font-size: 15px; vertical-align: baseline; white-space: pre-wrap;">&nbsp;this is quite useful when I want to do operation like AND, OR, or +/-, for example, I want to subtract file1 by file2:</span><br /><span style="font-family: Arial; font-size: 15px; font-weight: bold; vertical-align: baseline; white-space: pre-wrap;">sort file1 file2 | uniq -u</span><span style="font-family: Arial; font-size: 15px; vertical-align: baseline; white-space: pre-wrap;"> // output all lines which are not in file1 or file2</span><br /><span style="font-family: Arial; font-size: 15px; vertical-align: baseline; white-space: pre-wrap;">if there are duplicated lines in file1/file2, then it's safer to use:</span><br /><span style="font-family: Arial; font-size: 15px; font-weight: bold; vertical-align: baseline; white-space: pre-wrap;">sort file1 file2 file2 | uniq -u</span></b>