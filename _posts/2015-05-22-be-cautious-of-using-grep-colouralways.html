---
layout: post
title: Be cautious of using grep --colour=always
date: '2015-05-22T11:49:00.002-04:00'
author: Xianjun Dong
tags:
- grep
- linux
modified_time: '2015-05-22T11:54:58.886-04:00'
blogger_id: tag:blogger.com,1999:blog-12445049.post-5480865018691733833
blogger_orig_url: http://onetipperday.blogspot.com/2015/05/be-cautious-of-using-grep-colouralways.html
---

I noticed that <span style="font-family: Courier New, Courier, monospace;">grep --colour=always</span> can embed additional code (for coloring, for example,&nbsp;<span style="background-color: #eeeeee; color: #222222; font-family: Consolas, Menlo, Monaco, 'Lucida Console', 'Liberation Mono', 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', 'Courier New', monospace, sans-serif; font-size: 13px; line-height: 16.8999996185303px;">^[[01;31m^[[K &nbsp; &nbsp;^[[m^[[K</span>) in your text, which could lead downstream confusion. Here is one such example:<br /><a href="https://stackoverflow.com/questions/18315380/invisible-0131-number-in-bash">https://stackoverflow.com/questions/18315380/invisible-0131-number-in-bash</a><br /><br /><div class="p1"><span class="s1"><span style="font-family: Courier New, Courier, monospace;">$ echo 1 2 3 | grep 2</span></span></div><div class="p1"><span class="s1"><span style="font-family: Courier New, Courier, monospace;">1 2 3</span></span></div><div class="p1"><span class="s1"><span style="font-family: Courier New, Courier, monospace;">$ echo 1 2 3 | grep 2 | cat -v</span></span></div><div class="p1"><span class="s1"><span style="font-family: Courier New, Courier, monospace;">1 2 3</span></span></div><div class="p1"><span class="s1"><span style="font-family: Courier New, Courier, monospace;">$ echo 1 2 3 | grep --colour=always 2&nbsp;</span></span></div><div class="p1"><span class="s1"><span class="s1" style="font-family: 'Courier New', Courier, monospace;">1&nbsp;</span><span class="s2" style="font-family: 'Courier New', Courier, monospace;"><span style="color: red;">2</span></span><span class="s1" style="font-family: 'Courier New', Courier, monospace;">&nbsp;3</span></span></div><div class="p1"><span class="s1"><span style="font-family: Courier New, Courier, monospace;">$ echo 1 2 3 | grep --colour=always 2 | cat -v</span></span></div><div class="p1"><span class="s1"></span></div><div class="p1"><span class="s1"><span style="font-family: Courier New, Courier, monospace;">1 ^[[01;31m^[[K2^[[m^[[K 3</span></span></div><div class="p1"><span class="s1"><br /></span></div>See <a href="http://stackoverflow.com/a/30037063/951718">my answer</a> for more detail.<br /><br />The solution is to use<span style="background-color: white; color: #222222; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; line-height: 19.5px;">&nbsp;</span><code style="background-color: #eeeeee; border: 0px; color: #222222; font-family: Consolas, Menlo, Monaco, 'Lucida Console', 'Liberation Mono', 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', 'Courier New', monospace, sans-serif; font-size: 13px; margin: 0px; padding: 1px 5px; white-space: pre-wrap;">--colour=auto</code><span style="background-color: white; color: #222222; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; line-height: 19.5px;">or not use the&nbsp;</span><code style="background-color: #eeeeee; border: 0px; color: #222222; font-family: Consolas, Menlo, Monaco, 'Lucida Console', 'Liberation Mono', 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', 'Courier New', monospace, sans-serif; font-size: 13px; margin: 0px; padding: 1px 5px; white-space: pre-wrap;">--colour</code><span style="background-color: white; color: #222222; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; line-height: 19.5px;">&nbsp;option at all.</span><br /><span style="background-color: white; color: #222222; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 15px; line-height: 19.5px;"><br /></span><br /><div class="p1"><span class="s1"><span style="font-family: Courier New, Courier, monospace;">$ echo 1 2 3 | grep --colour=auto 2&nbsp;</span></span></div><div class="p1"><span class="s1"><span class="s1" style="font-family: 'Courier New', Courier, monospace;">1&nbsp;</span><span class="s2" style="font-family: 'Courier New', Courier, monospace;"><span style="color: red;">2</span></span><span class="s1" style="font-family: 'Courier New', Courier, monospace;">&nbsp;3</span></span></div><div class="p1"><span class="s1"><span style="font-family: Courier New, Courier, monospace;">$ echo 1 2 3 | grep --colour=auto 2 | cat -v</span></span></div><div class="p1"><span class="s1"><span style="font-family: Courier New, Courier, monospace;">1&nbsp;2&nbsp;3</span></span></div><br />Check your <span style="font-family: Courier New, Courier, monospace;">.bashrc</span> to see if you set <span style="font-family: Courier New, Courier, monospace;">alias grep='grep --colour=always'</span> like I did. 