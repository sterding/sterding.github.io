---
layout: post
title: display time series data in R
date: '2011-08-19T11:04:00.000-04:00'
author: Xianjun
tags:
- SVG
- finance
- heat calendar
- pretty-R
- R
modified_time: '2011-09-20T10:30:56.859-04:00'
blogger_id: tag:blogger.com,1999:blog-12445049.post-1512735696484853913
blogger_orig_url: http://onetipperday.blogspot.com/2011/08/heat-calendar-for-time-series-data.html
---

<div dir="ltr" style="text-align: left;" trbidi="on">Thanks to the Revolutions <a href="http://blog.revolutionanalytics.com/2011/07/r-svg-graphics.html">blog</a>, several things learned here:<br />1. R code for <a href="http://blog.revolution-computing.com/downloads/calendarHeat.R">heat calendar</a><br />2. generate <a href="http://www.inside-r.org/r-doc/grDevices/cairo">SVG</a> from R<br />3. <a href="http://www.inside-r.org/pretty-r/tool">pretty-R tool</a><br /><br />OK. Let's explain it by plotting the fund WASCX (<span class="Apple-style-span" style="background-color: white; font-family: arial; font-size: 17px; line-height: 20px;">IVY ASSET STRATEGY FUND CLASS C</span>) from 2009-03-14:<br /><div style="overflow: auto;"><div class="geshifilter"><pre class="r geshifilter-R" style="font-family: monospace;"><span style="color: #666666; font-style: italic;"># source code of calendarHeat (by Paul Bleicher)</span><br /><a href="http://inside-r.org/r-doc/base/source"><span style="color: #003399; font-weight: bold;">source</span></a><span style="color: #009900;">(</span><span style="color: blue;">"http://blog.revolution-computing.com/downloads/calendarHeat.R"</span><span style="color: #009900;">)</span><br />&nbsp;<br /><span style="color: #666666; font-style: italic;"># fetch stock time series data from Yahoo finance</span><br />stock &lt;- <span style="color: blue;">"WASCX"</span><br />start.date &lt;- <span style="color: blue;">"2009-03-14"</span><br />end.date &lt;- <a href="http://inside-r.org/r-doc/base/Sys.Date"><span style="color: #003399; font-weight: bold;">Sys.Date</span></a><span style="color: #009900;">(</span><span style="color: #009900;">)</span><br /><a href="http://inside-r.org/r-doc/base/quote"><span style="color: #003399; font-weight: bold;">quote</span></a> &lt;- <a href="http://inside-r.org/r-doc/base/paste"><span style="color: #003399; font-weight: bold;">paste</span></a><span style="color: #009900;">(</span><span style="color: blue;">"http://ichart.finance.yahoo.com/table.csv?s="</span><span style="color: #339933;">,</span><br />                stock<span style="color: #339933;">,</span><br />                <span style="color: blue;">"&amp;a="</span><span style="color: #339933;">,</span> <a href="http://inside-r.org/r-doc/base/substr"><span style="color: #003399; font-weight: bold;">substr</span></a><span style="color: #009900;">(</span>start.date<span style="color: #339933;">,</span><span style="color: #cc66cc;">6</span><span style="color: #339933;">,</span><span style="color: #cc66cc;">7</span><span style="color: #009900;">)</span><span style="color: #339933;">,</span><br />                <span style="color: blue;">"&amp;b="</span><span style="color: #339933;">,</span> <a href="http://inside-r.org/r-doc/base/substr"><span style="color: #003399; font-weight: bold;">substr</span></a><span style="color: #009900;">(</span>start.date<span style="color: #339933;">,</span> <span style="color: #cc66cc;">9</span><span style="color: #339933;">,</span> <span style="color: #cc66cc;">10</span><span style="color: #009900;">)</span><span style="color: #339933;">,</span><br />                <span style="color: blue;">"&amp;c="</span><span style="color: #339933;">,</span> <a href="http://inside-r.org/r-doc/base/substr"><span style="color: #003399; font-weight: bold;">substr</span></a><span style="color: #009900;">(</span>start.date<span style="color: #339933;">,</span> <span style="color: #cc66cc;">1</span><span style="color: #339933;">,</span><span style="color: #cc66cc;">4</span><span style="color: #009900;">)</span><span style="color: #339933;">,</span> <br />                <span style="color: blue;">"&amp;d="</span><span style="color: #339933;">,</span> <a href="http://inside-r.org/r-doc/base/substr"><span style="color: #003399; font-weight: bold;">substr</span></a><span style="color: #009900;">(</span>end.date<span style="color: #339933;">,</span><span style="color: #cc66cc;">6</span><span style="color: #339933;">,</span><span style="color: #cc66cc;">7</span><span style="color: #009900;">)</span><span style="color: #339933;">,</span><br />                <span style="color: blue;">"&amp;e="</span><span style="color: #339933;">,</span> <a href="http://inside-r.org/r-doc/base/substr"><span style="color: #003399; font-weight: bold;">substr</span></a><span style="color: #009900;">(</span>end.date<span style="color: #339933;">,</span> <span style="color: #cc66cc;">9</span><span style="color: #339933;">,</span> <span style="color: #cc66cc;">10</span><span style="color: #009900;">)</span><span style="color: #339933;">,</span><br />                <span style="color: blue;">"&amp;f="</span><span style="color: #339933;">,</span> <a href="http://inside-r.org/r-doc/base/substr"><span style="color: #003399; font-weight: bold;">substr</span></a><span style="color: #009900;">(</span>end.date<span style="color: #339933;">,</span> <span style="color: #cc66cc;">1</span><span style="color: #339933;">,</span><span style="color: #cc66cc;">4</span><span style="color: #009900;">)</span><span style="color: #339933;">,</span><br />                <span style="color: blue;">"&amp;g=d&amp;ignore=.csv"</span><span style="color: #339933;">,</span> sep=<span style="color: blue;">""</span><span style="color: #009900;">)</span>             <br />stock.data &lt;- <a href="http://inside-r.org/r-doc/utils/read.csv"><span style="color: #003399; font-weight: bold;">read.csv</span></a><span style="color: #009900;">(</span><a href="http://inside-r.org/r-doc/base/quote"><span style="color: #003399; font-weight: bold;">quote</span></a><span style="color: #339933;">,</span> as.is=<span style="color: black; font-weight: bold;">TRUE</span><span style="color: #009900;">)</span><br />&nbsp;<br /><span style="color: #666666; font-style: italic;"># display in SVG format</span><br /><a href="http://inside-r.org/r-doc/grDevices/svg"><span style="color: #003399; font-weight: bold;">svg</span></a><span style="color: #009900;">(</span><span style="color: blue;">"WASCX.svg"</span><span style="color: #339933;">,</span>width=<span style="color: #cc66cc;">14</span><span style="color: #339933;">,</span>height=<span style="color: #cc66cc;">7</span><span style="color: #009900;">)</span><br />calendarHeat<span style="color: #009900;">(</span>stock.data$Date<span style="color: #339933;">,</span> stock.data$Adj.Close<span style="color: #339933;">,</span> <br />  varname=<span style="color: blue;">"WASCX Adjusted Close"</span><span style="color: #009900;">)</span><br /><a href="http://inside-r.org/r-doc/grDevices/dev.off"><span style="color: #003399; font-weight: bold;">dev.off</span></a><span style="color: #009900;">(</span><span style="color: #009900;">)</span></pre></div></div><a href="http://www.inside-r.org/pretty-r" title="Created by Pretty R at inside-R.org">Created by Pretty R at inside-R.org</a><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://dl.dropbox.com/u/13229134/WASCX.svg" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="320" src="http://dl.dropbox.com/u/13229134/WASCX.svg" width="640" /></a></div></div>