---
layout: post
title: 'awk redirecting output in AWK: override or not?'
date: '2012-06-06T14:40:00.001-04:00'
author: Xianjun Dong
tags:
- awk
modified_time: '2012-06-06T14:49:48.015-04:00'
blogger_id: tag:blogger.com,1999:blog-12445049.post-6598240943490707624
blogger_orig_url: http://onetipperday.blogspot.com/2012/06/awk-redirecting-output-in-awk-override.html
---

<br /><br /><dt><b><code>print&nbsp;</code><var>items</var><code>&nbsp;&gt;&nbsp;</code><var>output-file</var></b></dt><dd>This redirection prints the items into the output file named&nbsp;<var>output-file</var>. The file name&nbsp;<var>output-file</var>&nbsp;can be any expression. Its value is changed to a string and then used as a file name (see&nbsp;<a href="http://www.gnu.org/software/gawk/manual/html_node/Expressions.html#Expressions">Expressions</a>).When this type of redirection is used, the&nbsp;<var>output-file</var>&nbsp;is erased before the <b><i>first</i></b> output is written to it. Subsequent writes to the same&nbsp;<var>output-file</var>&nbsp;do not erase&nbsp;<var>output-file</var>, but append to it. (<span style="color: red;"><b><u>This is different from how you use redirections in shell scripts.</u></b></span>) If&nbsp;<var>output-file</var>&nbsp;does not exist, it is created. For example, here is how an&nbsp;<samp>awk</samp>&nbsp;program can write a list of BBS names to one file named&nbsp;<samp>name-list</samp>, and a list of phone numbers to another file named&nbsp;<samp>phone-list</samp>:<br /><pre class="example">          $ <kbd>awk '{ print $2 &gt; "phone-list"</kbd><br />          &gt;        <kbd>print $1 &gt; "name-list" }' BBS-list</kbd><br />          $ <kbd>cat phone-list</kbd><br />          -| 555-5553<br />          -| 555-3412<br />          ...<br />          $ <kbd>cat name-list</kbd><br />          -| aardvark<br />          -| alpo-net<br />          ...<br /></pre><div class="noindent">Each output file contains one name or number per line.</div><a href="http://draft.blogger.com/blogger.g?blogID=12445049" name="index-g_t_0040code_007b_003e_007d-_0028right-angle-bracket_0029_002c-_0040code_007b_003e_003e_007d-operator-_0028I_002fO_0029-716"></a><a href="http://draft.blogger.com/blogger.g?blogID=12445049" name="index-right-angle-bracket-_0028_0040code_007b_003e_007d_0029_002c-_0040code_007b_003e_003e_007d-operator-_0028I_002fO_0029-717"></a></dd><dt><b><code>print&nbsp;</code><var>items</var><code>&nbsp;&gt;&gt;&nbsp;</code><var>output-file</var></b></dt><dd>This redirection prints the items into the pre-existing output file named&nbsp;<var>output-file</var>. The difference between this and the single-‘<samp>&gt;</samp>’ redirection is that the old contents (if any) of&nbsp;<var>output-file</var>&nbsp;are not erased. Instead, the&nbsp;<samp>awk</samp>&nbsp;output is appended to the file. If&nbsp;<var>output-file</var>&nbsp;does not exist, then it is created.</dd><br /><div><br /></div><div><br /></div><div>Here is the example code:</div><div><br /></div><div>cat &gt; test.txt</div><div>a</div><div>b</div><div>c</div><div>d</div><div><br /></div><div>awk 'BEGIN{print "e1" &gt;&gt; "test.txt";&nbsp;print "e2" &gt;&gt;&nbsp;"test.txt";&nbsp;print "e3" &gt;&gt;&nbsp;"test.txt";}'</div><div><br /></div><div><div>$ cat test.txt&nbsp;</div><div>a</div><div>b</div><div>c</div><div>d</div><div>e1</div><div>e2</div><div>e3</div></div><div><br /></div><div><div>awk 'BEGIN{print "e1" &gt; "test.txt";&nbsp;print "e2" &gt; "test.txt";&nbsp;print "e3" &gt; "test.txt";}'</div></div><div><br /></div><div><div>$ cat test.txt&nbsp;</div><div>e1</div><div>e2</div><div>e3</div></div><div><br /><br />But I just don't understand why the test.txt is gone in code below:<br /><br />awk 'BEGIN{print "e1" &gt; "test.txt"; system("rm test.txt");print "e2" &gt; "test.txt"; print "e3" &gt; "test.txt";}'<br /><br /></div><div><br /></div>