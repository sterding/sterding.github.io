---
layout: post
title: Finding connected components of a graph
date: '2012-08-06T14:17:00.000-04:00'
author: Xianjun Dong
tags:
- algorithm
- network
modified_time: '2012-08-06T15:13:11.287-04:00'
thumbnail: http://3.bp.blogspot.com/-nDzXLyyIVMc/UCARowf-hwI/AAAAAAAAAWw/M6m1cu3-lK8/s72-c/500px-Pseudoforest.svg.png
blogger_id: tag:blogger.com,1999:blog-12445049.post-9166755070270053491
blogger_orig_url: http://onetipperday.blogspot.com/2012/08/finding-connected-components-of-graph.html
---

I recently was bothered by a seemly-easy problem: how to merge lines with common number(s)?<br /><br />For example, if the original file looks like:<br /><br />1;2;3;4<br />4;5<br />7;5<br />10;13<br />22;34<br />11;13<br /><br />Based on the rule, it will be merged into:<br />1;2;3;4;5;7<br />10;11;13<br />22;34<br /><br />This is actually derived from a common problem in graph theory: how to detect the <a href="http://en.wikipedia.org/wiki/Connected_component_(graph_theory)" target="_blank">connect components</a>?<br /><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-nDzXLyyIVMc/UCARowf-hwI/AAAAAAAAAWw/M6m1cu3-lK8/s1600/500px-Pseudoforest.svg.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="346" src="http://3.bp.blogspot.com/-nDzXLyyIVMc/UCARowf-hwI/AAAAAAAAAWw/M6m1cu3-lK8/s400/500px-Pseudoforest.svg.png" width="400" /></a></div><br /><div class="separator" style="clear: both; text-align: center;"></div><div class="separator" style="clear: both; text-align: left;">Imagine each number in the txt file is the label of nodes, one line is a sub-graph (more&nbsp;extremely, it can be two numbers/nodes for just one edge). So if two lines have common number, they have common node connected, therefore should be merged together. In this case, I don't need to consider the topology of final result, which means the order of number in the final files does not matter.&nbsp;</div><div class="separator" style="clear: both; text-align: left;"><br /></div><div class="separator" style="clear: both; text-align: left;">Of course, there are <a href="http://en.wikipedia.org/wiki/Connected_component_(graph_theory)#Algorithms" target="_blank">more&nbsp;sophisticated&nbsp;ways</a> to do so. But can we do it using bash command?</div><div class="separator" style="clear: both; text-align: left;"><br /></div><div class="separator" style="clear: both; text-align: left;">Here is it (../data/IDs is the node label file):</div><div class="separator" style="clear: both; text-align: left;"><br /></div><div class="separator" style="clear: both; text-align: left;"></div><div class="separator" style="clear: both;"><span style="font-family: Courier New, Courier, monospace;">sed 's/;/\n/g'&nbsp;../data/IDs&nbsp;| sort -u &gt; ../data/uniqIDs</span></div><div class="separator" style="clear: both;"><span style="font-family: Courier New, Courier, monospace;">cp&nbsp;../data/IDs a.temp</span></div><div class="separator" style="clear: both;"><span style="font-family: Courier New, Courier, monospace;"><br /></span></div><div class="separator" style="clear: both;"><span style="font-family: Courier New, Courier, monospace;">while IFS= read -r line</span></div><div class="separator" style="clear: both;"><span style="font-family: Courier New, Courier, monospace;">do</span></div><div class="separator" style="clear: both;"><span style="font-family: Courier New, Courier, monospace;">&nbsp; &nbsp;grep $line&nbsp;a.temp&nbsp;| tr ';' '\n' | sort -u | tr '\n' ';' | sed 's/;$/\n/' &gt; b.temp</span></div><div class="separator" style="clear: both;"><span style="font-family: Courier New, Courier, monospace;">&nbsp; &nbsp;grep -v $line&nbsp;a.temp&nbsp;&gt;&gt; b.temp</span></div><div class="separator" style="clear: both;"><span style="font-family: Courier New, Courier, monospace;">&nbsp; &nbsp;cp b.temp&nbsp;a.temp</span></div><div class="separator" style="clear: both;"><span style="font-family: Courier New, Courier, monospace;">done &lt;&nbsp;../data/uniqIDs</span></div>