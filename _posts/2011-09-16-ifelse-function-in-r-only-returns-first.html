---
layout: post
title: ifelse function in R only returns the first element
date: '2011-09-16T17:50:00.000-04:00'
author: Xianjun Dong
tags:
- R
- ifelse
modified_time: '2011-09-20T10:35:29.283-04:00'
blogger_id: tag:blogger.com,1999:blog-12445049.post-9057235607095819897
blogger_orig_url: http://onetipperday.blogspot.com/2011/09/ifelse-function-in-r-only-returns-first.html
---

<div dir="ltr" style="text-align: left;" trbidi="on">If you also favor to use the function, be aware of the returned value. For example:<br /><br /><div style="overflow: auto;"><div class="geshifilter"><pre class="r geshifilter-R" style="font-family: monospace;">&gt; <a href="http://inside-r.org/r-doc/base/ifelse"><span style="color: #003399; font-weight: bold;">ifelse</span></a><span style="color: #009900;">(</span><span style="color: #cc66cc;">1</span>&gt;<span style="color: #cc66cc;">0</span><span style="color: #339933;">,</span> <span style="color: #cc66cc;">3</span><span style="color: #339933;">,</span> <span style="color: #cc66cc;">4</span><span style="color: #009900;">)</span> <br /><span style="color: #009900;">[</span><span style="color: #cc66cc;">1</span><span style="color: #009900;">]</span> <span style="color: #cc66cc;">3</span><br />&gt; <a href="http://inside-r.org/r-doc/base/ifelse"><span style="color: #003399; font-weight: bold;">ifelse</span></a><span style="color: #009900;">(</span><span style="color: #cc66cc;">1</span>&gt;<span style="color: #cc66cc;">0</span><span style="color: #339933;">,</span> <a href="http://inside-r.org/r-doc/base/c"><span style="color: #003399; font-weight: bold;">c</span></a><span style="color: #009900;">(</span><span style="color: #cc66cc;">2</span><span style="color: #339933;">,</span> <span style="color: #cc66cc;">3</span><span style="color: #009900;">)</span><span style="color: #339933;">,</span> <a href="http://inside-r.org/r-doc/base/c"><span style="color: #003399; font-weight: bold;">c</span></a><span style="color: #009900;">(</span><span style="color: #cc66cc;">4</span><span style="color: #339933;">,</span> <span style="color: #cc66cc;">5</span><span style="color: #009900;">)</span><span style="color: #009900;">)</span>   <span style="color: #666666; font-style: italic;"># only the first element returned.</span><br /><span style="color: #009900;">[</span><span style="color: #cc66cc;">1</span><span style="color: #009900;">]</span> <span style="color: #cc66cc;">2</span><br />&nbsp;<br />&gt; <a href="http://inside-r.org/r-doc/base/ifelse"><span style="color: #003399; font-weight: bold;">ifelse</span></a><span style="color: #009900;">(</span><a href="http://inside-r.org/r-doc/base/c"><span style="color: #003399; font-weight: bold;">c</span></a><span style="color: #009900;">(</span><span style="color: #cc66cc;">1</span>:<span style="color: #cc66cc;">10</span><span style="color: #009900;">)</span>&gt;<span style="color: #cc66cc;">5</span><span style="color: #339933;">,</span> <span style="color: blue;">'on'</span><span style="color: #339933;">,</span> <span style="color: blue;">'off'</span><span style="color: #009900;">)</span><br /> <span style="color: #009900;">[</span><span style="color: #cc66cc;">1</span><span style="color: #009900;">]</span> <span style="color: blue;">"off"</span> <span style="color: blue;">"off"</span> <span style="color: blue;">"off"</span> <span style="color: blue;">"off"</span> <span style="color: blue;">"off"</span> <span style="color: blue;">"on"</span>  <span style="color: blue;">"on"</span>  <span style="color: blue;">"on"</span>  <span style="color: blue;">"on"</span>  <span style="color: blue;">"on"</span> </pre></div></div><br /><br />Here is another nice example (from&nbsp;http://rwiki.sciviews.org/doku.php?id=tips:programming:ifelse)<br /><br /><div style="overflow: auto;"><div class="geshifilter"><pre class="r geshifilter-R" style="font-family: monospace;">&gt; varD &lt;- <a href="http://inside-r.org/r-doc/base/log"><span style="color: #003399; font-weight: bold;">log</span></a><span style="color: #009900;">(</span><span style="color: #cc66cc;">0</span>:<span style="color: #cc66cc;">9</span><span style="color: #009900;">)</span>  <span style="color: #666666; font-style: italic;"># A vector like this one that contains -Inf could be troublesome in subsequent manipulations</span><br />&gt; varD<br /> <span style="color: #009900;">[</span><span style="color: #cc66cc;">1</span><span style="color: #009900;">]</span>      -<span style="color: black; font-weight: bold;">Inf</span> <span style="color: #cc66cc;">0.0000000</span> <span style="color: #cc66cc;">0.6931472</span> <span style="color: #cc66cc;">1.0986123</span> <span style="color: #cc66cc;">1.3862944</span> <span style="color: #cc66cc;">1.6094379</span> <span style="color: #cc66cc;">1.7917595</span><br /> <span style="color: #009900;">[</span><span style="color: #cc66cc;">8</span><span style="color: #009900;">]</span> <span style="color: #cc66cc;">1.9459101</span> <span style="color: #cc66cc;">2.0794415</span> <span style="color: #cc66cc;">2.1972246</span><br />&gt; varD &lt;- <a href="http://inside-r.org/r-doc/base/ifelse"><span style="color: #003399; font-weight: bold;">ifelse</span></a><span style="color: #009900;">(</span><a href="http://inside-r.org/r-doc/base/is.finite"><span style="color: #003399; font-weight: bold;">is.finite</span></a><span style="color: #009900;">(</span>varD<span style="color: #009900;">)</span><span style="color: #339933;">,</span> varD<span style="color: #339933;">,</span> <span style="color: black; font-weight: bold;">NA</span><span style="color: #009900;">)</span>   <span style="color: #666666; font-style: italic;"># Remove the -Inf, replace with NA</span><br />&gt; varD<br /> <span style="color: #009900;">[</span><span style="color: #cc66cc;">1</span><span style="color: #009900;">]</span>        <span style="color: black; font-weight: bold;">NA</span> <span style="color: #cc66cc;">0.0000000</span> <span style="color: #cc66cc;">0.6931472</span> <span style="color: #cc66cc;">1.0986123</span> <span style="color: #cc66cc;">1.3862944</span> <span style="color: #cc66cc;">1.6094379</span> <span style="color: #cc66cc;">1.7917595</span><br /> <span style="color: #009900;">[</span><span style="color: #cc66cc;">8</span><span style="color: #009900;">]</span> <span style="color: #cc66cc;">1.9459101</span> <span style="color: #cc66cc;">2.0794415</span> <span style="color: #cc66cc;">2.1972246</span></pre></div></div></div>