---
layout: post
title: 'arguments array for bash script '
date: '2012-08-30T22:10:00.000-04:00'
author: Xianjun Dong
tags:
- argument
- bash
modified_time: '2012-09-06T11:38:12.930-04:00'
blogger_id: tag:blogger.com,1999:blog-12445049.post-381198753640291806
blogger_orig_url: http://onetipperday.blogspot.com/2012/08/arguments-array-for-bash-script.html
---

To list all arguments of a bash script, you can do this:<br /><blockquote class="tr_bq"><span style="font-family: Courier New, Courier, monospace;">#!/bin/bash</span><br /><span style="font-family: Courier New, Courier, monospace;">args=("$@")</span><br /><span style="font-family: Courier New, Courier, monospace;">for ((i=0; i &lt; $#; i++))</span><br /><span style="font-family: Courier New, Courier, monospace;">{</span><br /><span style="font-family: Courier New, Courier, monospace;">&nbsp; &nbsp; echo "argument $((i+1)): ${args[$i]}"</span><br /><span style="font-family: Courier New, Courier, monospace;">}</span></blockquote><div>Note that:&nbsp;</div><blockquote class="tr_bq"><span style="background-color: #cccccc;">args=("$@") is superior to the sometimes seen args=($@) since the former will not create separate array elements if any of the args have spaces in them (so actually this is a pretty cool way to iterate through a directory with filenames containing spaces)Note that the array index starts at zero, but the command line args start at one, which is why the test in the loop is 'i &lt; $#' not 'i &lt;= $#' and the argument index is offset by 1 in the output.<br />Ref: http://forums.fedoraforum.org/showthread.php?t=220184</span></blockquote><div>For example, if you want to wrap your own script in qsub, you can write this:</div><div><br /></div><div><div><span style="font-family: Courier New, Courier, monospace;">myqsub()</span></div><div><span style="font-family: Courier New, Courier, monospace;">{</span></div><div><span style="font-family: Courier New, Courier, monospace;">&nbsp; &nbsp; rgs=("$@")</span></div><div><span style="font-family: Courier New, Courier, monospace;">&nbsp; &nbsp; # if no file write to last argument, use</span></div><div><span style="font-family: Courier New, Courier, monospace;">&nbsp; &nbsp; # cmd=`echo ${rgs[@]}`</span></div><div><span style="font-family: Courier New, Courier, monospace;"><br /></span></div><div><span style="font-family: Courier New, Courier, monospace;">&nbsp; &nbsp; cmd=''</span></div><div><span style="font-family: Courier New, Courier, monospace;">&nbsp; &nbsp; for ((i=0; i &lt; $#-1; i++)) {</span></div><div><span style="font-family: Courier New, Courier, monospace;">&nbsp; &nbsp; &nbsp; &nbsp;rgsi="${rgs[$i]}"</span></div><div><span style="font-family: Courier New, Courier, monospace;">&nbsp; &nbsp; &nbsp; &nbsp;cmd="$cmd $rgsi"</span></div><div><span style="font-family: Courier New, Courier, monospace;">&nbsp; &nbsp; }</span></div><div><span style="font-family: Courier New, Courier, monospace;">&nbsp; &nbsp; cmd="$cmd &gt; ${rgs[$i]}"</span></div><div><span style="font-family: Courier New, Courier, monospace;">&nbsp; &nbsp; echo $cmd;</span></div><div><span style="font-family: Courier New, Courier, monospace;"><br /></span></div><div><span style="font-family: Courier New, Courier, monospace;">&nbsp; &nbsp; sgefile=`mktemp`</span></div><div><span style="font-family: Courier New, Courier, monospace;"><br /></span></div><div><span style="font-family: Courier New, Courier, monospace;">&nbsp; &nbsp; echo "</span></div><div><span style="font-family: Courier New, Courier, monospace;">&nbsp; &nbsp; ## script for running a command in a cluster way</span></div><div><span style="font-family: Courier New, Courier, monospace;"><br /></span></div><div><span style="font-family: Courier New, Courier, monospace;">&nbsp; &nbsp; #!/bin/sh</span></div><div><span style="font-family: Courier New, Courier, monospace;">&nbsp; &nbsp; #$ -V</span></div><div><span style="font-family: Courier New, Courier, monospace;">&nbsp; &nbsp; #$ -cwd</span></div><div><span style="font-family: Courier New, Courier, monospace;">&nbsp; &nbsp; #$ -pe single 2</span></div><div><span style="font-family: Courier New, Courier, monospace;">&nbsp; &nbsp; #$ -o $HOME/sge_jobs_output/sge_job.\$JOB_ID.out -j y</span></div><div><span style="font-family: Courier New, Courier, monospace;">&nbsp; &nbsp; #$ -S /bin/bash</span></div><div><span style="font-family: Courier New, Courier, monospace;">&nbsp; &nbsp; #$ -l mem_free=1G</span></div><div><span style="font-family: Courier New, Courier, monospace;"><br /></span></div><div><span style="font-family: Courier New, Courier, monospace;">&nbsp; &nbsp; $cmd</span></div><div><span style="font-family: Courier New, Courier, monospace;"><br /></span></div><div><span style="font-family: Courier New, Courier, monospace;">&nbsp; &nbsp; " | sed 's/^[ \t]*//g' &gt; $sgefile</span></div><div><span style="font-family: Courier New, Courier, monospace;">&nbsp; &nbsp; qsub $sgefile</span></div><div><span style="font-family: Courier New, Courier, monospace;">}</span></div><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /></div>