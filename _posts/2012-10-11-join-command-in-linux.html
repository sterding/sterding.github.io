---
layout: post
title: joining files with empty field
date: '2012-10-11T15:32:00.002-04:00'
author: Xianjun Dong
tags:
- linux
- unix
- join
modified_time: '2012-10-30T17:38:54.973-04:00'
blogger_id: tag:blogger.com,1999:blog-12445049.post-4265205385851762959
blogger_orig_url: http://onetipperday.blogspot.com/2012/10/join-command-in-linux.html
---

An easy way to join two text files by common column is to use the "join" command in linux. &nbsp;Here are some examples for that:&nbsp;http://how-to.linuxcareer.com/learning-linux-commands-join<br /><br /><br /><pre style="-webkit-box-shadow: rgb(204, 204, 204) 5px 5px 5px; background-color: #efefef; border-left-color: black; border-left-style: solid; border-left-width: 5px; box-shadow: rgb(204, 204, 204) 5px 5px 5px; color: #333333; font-size: 12px; margin-bottom: 15px; margin-top: 5px; padding: 10px 15px;"><strong style="margin: 0px; padding: 0px;">$ cat A.txt B.txt</strong><br />John    A       1<br />Linda   B       2<br />Rares   C       3<br />1       A<br />2       B<br />3       C<br /><strong style="margin: 0px; padding: 0px;">$ join -1 2 -2 2 A.txt B.txt</strong><br />A John 1 1<br />B Linda 2 2<br />C Rares 3 3</pre><br /><br />What the trick is, when there is missed/empty field in one of the file, the "-e" option works only when "-o" is set. Here is full story for that:&nbsp;http://stackoverflow.com/questions/984986/padding-empty-field-in-unix-join-operation<br /><br /><blockquote>"Important: FILE1 and FILE2 must be sorted on the join fields." (from&nbsp;<a href="http://swoolley.org/man.cgi/join" rel="nofollow" style="background-color: transparent; background-position: initial initial; background-repeat: initial initial; border: 0px; color: #4a6b82; cursor: pointer; font-size: 14px; margin: 0px; padding: 0px; text-decoration: none; vertical-align: baseline;">this</a>&nbsp;online manpage).<br />This problem #1. Problem #2 is worse: option&nbsp;<code style="background-color: #eeeeee; background-position: initial initial; background-repeat: initial initial; border: 0px; font-family: Consolas, Menlo, Monaco, 'Lucida Console', 'Liberation Mono', 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', 'Courier New', monospace, serif; font-size: 14px; margin: 0px; padding: 1px 5px; vertical-align: baseline;">-e</code>&nbsp;is badly documented -- only works in conjunction with<code style="background-color: #eeeeee; background-position: initial initial; background-repeat: initial initial; border: 0px; font-family: Consolas, Menlo, Monaco, 'Lucida Console', 'Liberation Mono', 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', 'Courier New', monospace, serif; font-size: 14px; margin: 0px; padding: 1px 5px; vertical-align: baseline;">-o</code>, so for example:<br /><code style="border: 0px; font-family: Consolas, Menlo, Monaco, 'Lucida Console', 'Liberation Mono', 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', 'Courier New', monospace, serif; font-size: 14px; margin: 0px; padding: 0px; vertical-align: baseline;">$ join -a 1 -a 2 -e'-' -o '0,1.2,2.2' sfile1.txt sfile2.txt</code>&nbsp;</blockquote><blockquote><code style="border: 0px; font-family: Consolas, Menlo, Monaco, 'Lucida Console', 'Liberation Mono', 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', 'Courier New', monospace, serif; font-size: 14px; margin: 0px; padding: 0px; vertical-align: baseline;">bar 2 -</code>&nbsp;&nbsp;&nbsp;</blockquote><blockquote><code style="border: 0px; font-family: Consolas, Menlo, Monaco, 'Lucida Console', 'Liberation Mono', 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', 'Courier New', monospace, serif; font-size: 14px; margin: 0px; padding: 0px; vertical-align: baseline;">boo - z</code>&nbsp;</blockquote><blockquote><code style="border: 0px; font-family: Consolas, Menlo, Monaco, 'Lucida Console', 'Liberation Mono', 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', 'Courier New', monospace, serif; font-size: 14px; margin: 0px; padding: 0px; vertical-align: baseline;">foo 1 x</code>&nbsp;</blockquote><blockquote><code style="border: 0px; font-family: Consolas, Menlo, Monaco, 'Lucida Console', 'Liberation Mono', 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', 'Courier New', monospace, serif; font-size: 14px; margin: 0px; padding: 0px; vertical-align: baseline;">qux 3 y</code>&nbsp;</blockquote><blockquote>where the&nbsp;<code style="background-color: #eeeeee; background-position: initial initial; background-repeat: initial initial; border: 0px; font-family: Consolas, Menlo, Monaco, 'Lucida Console', 'Liberation Mono', 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', 'Courier New', monospace, serif; font-size: 14px; margin: 0px; padding: 1px 5px; vertical-align: baseline;">s</code>&nbsp;prefix name indicated files that I've&nbsp;<code style="background-color: #eeeeee; background-position: initial initial; background-repeat: initial initial; border: 0px; font-family: Consolas, Menlo, Monaco, 'Lucida Console', 'Liberation Mono', 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', 'Courier New', monospace, serif; font-size: 14px; margin: 0px; padding: 1px 5px; vertical-align: baseline;">sort</code>ed beforehand.</blockquote>