---
layout: post
title: transpose a tab-delimited file in command line
date: '2014-09-11T15:55:00.000-04:00'
author: Xianjun Dong
tags:
- file processing
- data transformation
- transpose
- GNU
- kent utility
- unix
modified_time: '2014-09-11T15:58:00.966-04:00'
blogger_id: tag:blogger.com,1999:blog-12445049.post-3785331734151174373
blogger_orig_url: http://onetipperday.blogspot.com/2014/09/transpose-tab-delimited-file.html
---

Very often we need to transpose a&nbsp;tab-delimited file, e.g. rows --&gt; columns and columns --&gt; rows. For example, I have a SNP file like below, each row is SNP and each column is a sample:<br /><br /><span style="font-family: Courier New, Courier, monospace;">$ cat SNP.txt</span><br /><span style="font-family: Courier New, Courier, monospace;">id Sam_01 Sam_02 Sam_03 Sam_04 Sam_05</span><br /><span style="font-family: Courier New, Courier, monospace;">Snp_01 2 0 2 0 2</span><br /><span style="font-family: Courier New, Courier, monospace;">Snp_02 0 1 1 2 2</span><br /><span style="font-family: Courier New, Courier, monospace;">Snp_03 1 0 1 0 1</span><br /><span style="font-family: Courier New, Courier, monospace;">Snp_04 0 1 2 2 2</span><br /><span style="font-family: Courier New, Courier, monospace;">Snp_05 1 1 2 1 1</span><br /><span style="font-family: Courier New, Courier, monospace;">Snp_06 2 2 2 1 1</span><br /><span style="font-family: Courier New, Courier, monospace;">Snp_07 1 1 2 2 0</span><br /><span style="font-family: Courier New, Courier, monospace;">Snp_08 1 0 1 0 1</span><br /><span style="font-family: Courier New, Courier, monospace;">Snp_09 2 1 2 2 0</span><br /><br />I want to convert it to the following format:<br /><br /><div><span style="font-family: Courier New, Courier, monospace;">id Snp_01 Snp_02 Snp_03 Snp_04 Snp_05 Snp_06 Snp_07 Snp_08 Snp_09</span></div><div><span style="font-family: Courier New, Courier, monospace;">Sam_01 2 0 1 0 1 2 1 1 2&nbsp;</span></div><div><span style="font-family: Courier New, Courier, monospace;">Sam_02 0 1 0 1 1 2 1 0 1&nbsp;</span></div><div><span style="font-family: Courier New, Courier, monospace;">Sam_03 2 1 1 2 2 2 2 1 2&nbsp;</span></div><div><span style="font-family: Courier New, Courier, monospace;">Sam_04 0 2 0 2 1 1 2 0 2&nbsp;</span></div><div><span style="font-family: Courier New, Courier, monospace;">Sam_05 2 2 1 2 1 1 0 1 0</span><br /><pre style="word-wrap: break-word;"><span style="white-space: pre-wrap;"><br /></span></pre>We can easily do this in R (e.g.. <span style="font-family: Courier New, Courier, monospace;">t(df)</span>), but actually there are also a couple available tools in linux. Here are two I used:<br /><br /><b>1. <span style="font-family: Courier New, Courier, monospace;">rowsToCols</span>&nbsp;from <a href="http://hgdownload.soe.ucsc.edu/admin/exe/linux.x86_64/" target="_blank">Jim Kent's utility</a></b><br /><span style="font-family: Courier New, Courier, monospace;">wget http://hgdownload.soe.ucsc.edu/admin/exe/linux.x86_64/rowsToCols</span><br /><span style="font-family: Courier New, Courier, monospace;">cat&nbsp;SNP.txt |&nbsp;rowsToCols stdin stdout</span><br /><br /><b>2. <span style="font-family: Courier New, Courier, monospace;">datamash</span> from GNU</b><br /><span style="font-family: Courier New, Courier, monospace;">cat SNP.txt | datamash transpose</span><br /><br />btw, <span style="font-family: Courier New, Courier, monospace;">datamash</span> is really a neat command with many functions, like your swiss-knife for small daily tasks for data scientist. Here is its example page on GNU:<br /><a href="http://www.gnu.org/software/datamash/examples/">http://www.gnu.org/software/datamash/examples/</a></div>